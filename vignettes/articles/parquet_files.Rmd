---
title: "Parquet files"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

If you need to query several municipalities, indicators and zonal statistics, we recommend to download and locally query the parquet files using the `arrow` package. 

## BR-DWGD (13.65 GB)

-    Evapotranspiration: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Feto.parquet
-    Precipitation: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Fpr.parquet
-    Relative Humidity: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Frh.parquet
-    Solar radiation: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Frs.parquet
-    Maximum temperature: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Ftmax.parquet
-    Minimum temperature: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Ftmin.parquet
-    Wind speed: https://brdwgd.nyc3.cdn.digitaloceanspaces.com/parquet%2Fu2.parquet


## TerraClimate (1.02 GB)
-    Actual Evapotranspiration: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Faet.parquet
-    Climate Water Deficit: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fdef.parquet
-    Potential evapotranspiration: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fpdsi.parquet
-    Precipitation: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fpet.parquet
-    Runoff: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fq.parquet
-    Soil Moisture: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fsoil.parquet
-    Downward surface shortwave radiation: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fsrad.parquet
-    Snow water equivalent: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fswe.parquet
-    Max Temperature: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Ftmax.parquet
-    Min Temperature: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Ftmin.parquet
-    Vapor pressure: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fvap.parquet
-    Wind speed: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fws.parquet
-    Vapor Pressure Deficit: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fvpd.parquet
-    PDSI: https://terraclimate.nyc3.cdn.digitaloceanspaces.com/parquet%2Fpdsi.parquet

## Query example

After downloading the parquets files, you can query them using the `arrow` package.

```{r eval=FALSE}
library(tidyverse)
library(arrow)

brdwgd <- open_dataset(sources = "/parquet/files/address/")

brdwgd %>%
  filter(code_muni %in% c(3105608, 3304557, 3136702)) %>%
  filter(name == "Tmax_mean") %>%
  filter(date >= as.Date("2008-01-01") & date <= as.Date("2008-12-31")) %>%
  select(code_muni, date, value) %>%
  collect()
```

